<div class="bg_white_block">
  <div class="text_block">
    <h1>{{ section.settings.guest_title }}</h1>
    <p>{{ section.settings.guest_subtitle }}</p>
  </div>
  <div class="vouchers_block first">
  {% for block in section.blocks limit: 3 %}
    <div class="voucher {{ block.settings.tier }}">
      {{ 'voucher-icon-new.svg' | file_url | img_tag }}
      <h1>{{block.settings.title}}</h1>
      <h3>{{block.settings.points}}</h3>
      {% unless block.settings.tier contains 'silver' %}
      {% assign tier = 'Silver' %}
      {% if block.settings.tier contains 'champagne' %}
	      {% assign tier = 'Champagne' %}
      {% elsif block.settings.tier contains 'rosegold' %}
      {% assign tier = 'Rose Gold' %}
    	  {% endif %}
      <span>{{ tier }} TIER</span>
      {% endunless %}
    </div>
  {% endfor %}
  </div>
  <div class="vouchers_block">
  {% for block in section.blocks limit: 2 offset:3 %}
    <div class="voucher {{ block.settings.tier }}">
      {{ 'voucher-icon-new.svg' | file_url | img_tag }}
      <h1>{{block.settings.title}}</h1>
      <h3>{{block.settings.points}}</h3>
      {% unless block.settings.tier contains 'silver' %}
      {% assign tier = 'Silver' %}
      {% if block.settings.tier contains 'champagne' %}
	      {% assign tier = 'Champagne' %}
      {% elsif block.settings.tier contains 'rosegold' %}
      {% assign tier = 'Rose Gold' %}
    	  {% endif %}
      <span>{{ tier }} TIER</span>
      {% endunless %}
    </div>
  {% endfor %}
  </div>
  <div class="vouchers_block">
  {% for block in section.blocks limit: 2 offset:5 %}
    <div class="voucher {{ block.settings.tier }}">
      {{ 'voucher-icon-new.svg' | file_url | img_tag }}
      <h1>{{block.settings.title}}</h1>
      <h3>{{block.settings.points}}</h3>
      {% unless block.settings.tier contains 'silver' %}
      {% assign tier = 'Silver' %}
      {% if block.settings.tier contains 'champagne' %}
	      {% assign tier = 'Champagne' %}
      {% elsif block.settings.tier contains 'rosegold' %}
      {% assign tier = 'Rose Gold' %}
    	  {% endif %}
      <span>{{ tier }} TIER</span>
      {% endunless %}
    </div>
  {% endfor %}
  </div>


  <div data-lion-tier-rules-compare></div>

</div>

<script>
  var tier0 = $('#shopify-section-guest-rewards .lion-tier-rules-compare__row-cell--tier-0');
  var tier1 = $('#shopify-section-guest-rewards .lion-tier-rules-compare__row-cell--tier-1');
  var tier2 = $('#shopify-section-guest-rewards .lion-tier-rules-compare__row-cell--tier-2');
  
  var waitForEl = function(selector, callback) {
    if (jQuery(selector).length) {
      callback();
    } else {
      setTimeout(function() {
        waitForEl(selector, callback);
      }, 100);
    }
  };

  waitForEl('#shopify-section-guest-rewards .lion-tier-rules-compare__row-cell--tier-0', function() {
    $('#shopify-section-guest-rewards .lion-tier-rules-compare__row-cell--tier-0').css('text-indent', 0);
  });
  
  waitForEl('#shopify-section-guest-rewards .lion-tier-rules-compare__row-cell--tier-1', function() {
    $('#shopify-section-guest-rewards .lion-tier-rules-compare__row-cell--tier-1').css('text-indent', 0);
  });
  
  waitForEl('#shopify-section-guest-rewards .lion-tier-rules-compare__row-cell--tier-2', function() {
    $('#shopify-section-guest-rewards .lion-tier-rules-compare__row-cell--tier-2').css('text-indent', 0);
  });
  
</script>

{% schema %}
  {
    "name": "Rewards - Guest",
	"max_blocks": 10,
    "settings": [
      {
        "type": "text",
        "id": "guest_title",
        "label": "Title",
		"default": "Your Rewards"
      },
      {
        "type": "text",
        "id": "guest_subtitle",
        "label": "Subtitle",
		"default": "There are many ways to earn points & exchange them for rewards"
      }
    ],
    "blocks": [
      {
        "type": "voucher_block",
        "name": "Vouchers",
        "settings": [
          {
            "type": "select",
            "id": "tier",
            "label": "Select Tier",
            "default": "silver",
            "options": [
              {
                "value": "silver",
                "label": "Silver"
              },
              {
                "value": "champagne",
                "label": "Champagne"
              },
              {
                "value": "rosegold",
                "label": "Rose Gold"
              }
            ]
          },
          {
            "type": "text",
            "id": "title",
            "label": "Voucher Title"
          },
          {
            "type": "text",
            "id": "points",
            "label": "Voucher Points"
          }
        ]
      }
	]
  }
{% endschema %}
